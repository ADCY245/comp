import json
from collections import defaultdict

raw_data = """mic l1 l2
500 795 1050
500 780 1050
400 795 772
400 555 750
400 795 672
400 780 1050
400 760 1060
400 650 889
400 620 750
400 620 675
300 795 780
300 620 675
300 300 30
200 780 1050
150 760 1060
300 630 785
500 795 1050
500 375 530
400 560 770
400 560 760
400 940 1270
400 400 40
400 400 40
400 795 945
400 795 941
400 795 635
400 795 615
400 795 610
400 795 1070
400 795 1060
400 795 1050
400 787 1092
400 780 1060
400 780 1050
400 780 1040
400 770 1050
400 760 1060
400 735 1030
400 700 945
400 660 765
400 650 920
400 650 670
400 635 680
400 630 770
400 620 795
400 620 770
400 620 750
400 575 750
400 555 730
400 550 750
400 520 445
400 398 532
400 377 532
400 330 480
400 1240 1448
400 1200 1440
400 1150 1448
400 1110 1450
400 1092 1448
400 1092 1148
400 1067 863
400 660 770
300 920 1035
300 795 957
300 795 930
300 795 795
300 795 760
300 795 755
300 795 750
300 795 635
300 795 615
300 795 550
300 795 1060
300 795 1050
300 795 1040
300 795 1035
300 780 1050
300 750 830
300 750 550
300 748 605
300 735 1030
300 700 955
300 670 945
300 670 730
300 660 925
300 660 920
300 660 770
300 660 760
300 660 750
300 650 940
300 650 920
300 640 920
300 620 760
300 620 750
300 610 740
300 575 760
300 570 760
300 570 752
300 560 760
300 560 752
300 555 750
300 555 735
300 555 730
300 550 750
300 398 532
300 380 520
300 377 532
300 1540 1626
300 1540 1067
300 1320 1639
300 1320 1145
300 1270 1638
300 1240 1140
300 1110 1422
300 1110 1145
250 920 1035
250 795 945
250 795 940
250 795 830
250 795 770
250 795 650
250 795 635
250 795 620
250 795 575
250 795 560
250 795 1060
250 795 1050
250 790 1050
250 780 1050
250 760 560
250 760 1060
250 755 1055
250 750 830
250 740 666
250 688 770
250 680 950
250 670 945
250 660 770
250 660 765
250 650 920
250 650 795
250 645 765
250 640 775
250 250 25
250 620 950
250 620 770
250 620 750
250 600 820
250 570 760
250 570 752
250 560 770
250 555 750
250 555 735
250 555 675
250 550 750
250 545 740
250 520 670
250 520 445
250 380 525
250 1110 1473
250 1110 1430
200 850 755
200 820 1110
200 795 945
200 795 941
200 795 772
200 795 770
200 795 635
200 795 610
200 795 575
200 795 560
200 795 550
200 795 1100
200 795 1060
200 795 1050
200 790 1050
200 787 1092
200 780 1060
200 780 1055
200 780 1050
200 780 1040
200 760 560
200 760 1060
200 755 1055
200 735 1030
200 720 1040
200 688 770
200 680 950
200 670 945
200 660 920
200 660 772
200 660 765
200 660 750
200 660 745
200 650 920
200 650 795
200 645 765
200 635 750
200 635 680
200 630 772
200 627 772
200 620 950
200 620 770
200 620 750
200 600 948
200 600 820
200 560 770
200 560 760
200 559 762
200 555 750
200 550 750
200 525 700
200 520 670
200 377 532
200 1320 1639
200 1320 1070
200 1270 1638
200 1240 1626
200 1240 1448
200 1150 1448
200 1150 1423
200 1042 1045
150 681 941
150 880 1140
150 820 1110
150 795 945
150 795 635
150 795 610
150 795 1060
150 795 1050
150 780 1060
150 780 1050
150 760 1060
150 680 950
150 670 945
150 620 790
150 620 760
150 620 750
150 575 750
150 575 680
150 560 752
150 555 750
100 780 1060
150 555 730
150 550 750
150 1240 1448
150 1150 1448
150 1110 1150
125 430 540
100 940 1270
100 800 1060
100 795 615
100 795 1100
100 795 1060
100 795 1050
100 795 1030
100 790 1050
100 780 1050
100 770 915
100 770 830
100 760 1060
100 735 1030
100 640 795
100 635 680
100 620 750
100 575 750
100 555 750
100 377 532
100 375 530
100 1240 1488
"""

lines = [line.strip() for line in raw_data.splitlines() if line.strip() and not line.lower().startswith('mic')]

by_thickness = defaultdict(set)
for line in lines:
    parts = line.split()
    if len(parts) < 3:
        continue
    thickness = int(parts[0])
    width = int(parts[1])
    length = int(parts[2])
    by_thickness[thickness].add((width, length))

mpack = []
current_id = 1
for thickness in sorted(by_thickness):
    sizes = []
    for width, length in sorted(by_thickness[thickness]):
        sizes.append({
            "id": current_id,
            "width": width,
            "length": length,
            "price": 0
        })
        current_id += 1
    mpack.append({
        "id": str(thickness),
        "thickness": thickness,
        "sizes": sizes
    })

with open('static/data/mpack.json', 'w', encoding='utf-8') as f:
    json.dump({"mpack": mpack}, f, indent=2)
